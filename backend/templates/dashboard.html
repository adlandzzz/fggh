<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TBGSOSAT - –î–∞—à–±–æ—Ä–¥</title>
    <link rel="stylesheet" href="/css/old-style.css">
    <style>
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .welcome-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .action-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .action-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .recent-activities {
            margin-top: 2rem;
        }
        
        .activity-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">TBGSOSAT DASHBOARD</a>
                <nav class="nav">
                    <a href="/" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/dashboard" class="nav-link active">üìä –î–∞—à–±–æ—Ä–¥</a>
                    <a href="/admin" class="nav-link">‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞</a>
                    <a href="/orders" class="nav-link">üì¶ –ó–∞–∫–∞–∑—ã</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <div class="container">
            <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
            <div class="welcome-card">
                <h1>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.username }}!</h1>
                <p>–í–∞—à–∞ —Ä–æ–ª—å: <strong>{{ user.role }}</strong> ‚Ä¢ –°—Ç–∞—Ç—É—Å: <strong>{% if user.is_active %}–ê–∫—Ç–∏–≤–µ–Ω{% else %}–ù–µ–∞–∫—Ç–∏–≤–µ–Ω{% endif %}</strong></p>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë§</div>
                    <div class="stat-value" id="total-users">1</div>
                    <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-value">
                        {% if orders and orders.orders %}{{ orders.orders }}{% else %}0{% endif %}
                    </div>
                    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="completed-orders">0</div>
                    <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="total-revenue">0‚ÇΩ</div>
                    <div class="stat-label">–í—ã—Ä—É—á–∫–∞</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                <div>
                    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                        </div>
                        <div class="quick-actions">
                            <div class="action-card" onclick="location.href='/admin'">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üë•</div>
                                <div style="font-weight: 600;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</div>
                            </div>
                            <div class="action-card" onclick="location.href='/orders'">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì¶</div>
                                <div style="font-weight: 600;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</div>
                            </div>
                            <div class="action-card" onclick="showReports()">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìä</div>
                                <div style="font-weight: 600;">–û—Ç—á–µ—Ç—ã</div>
                            </div>
                            <div class="action-card" onclick="showSettings()">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚öôÔ∏è</div>
                                <div style="font-weight: 600;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                            </div>
                        </div>
                    </div>

                    <!-- –ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
                    <div class="card recent-activities">
                        <div class="card-header">
                            <h2 class="card-title">üìã –ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
                        </div>
                        <div id="recent-activities">
                            <div class="activity-item">
                                <div>üîî</div>
                                <div>
                                    <div style="font-weight: 600;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É</div>
                                    <div class="text-sm text-muted-foreground">–¢–æ–ª—å–∫–æ —á—Ç–æ</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div>üìä</div>
                                <div>
                                    <div style="font-weight: 600;">–î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω</div>
                                    <div class="text-sm text-muted-foreground">–¢–æ–ª—å–∫–æ —á—Ç–æ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                <div>
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</h2>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div>
                                <div class="text-sm text-muted-foreground">–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã</div>
                                <div style="font-weight: 600;">TBGSOSAT PRO 2.0</div>
                            </div>
                            <div>
                                <div class="text-sm text-muted-foreground">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</div>
                                <div style="font-weight: 600;">7 –Ω–æ—è–±—Ä—è 2024</div>
                            </div>
                            <div>
                                <div class="text-sm text-muted-foreground">–°—Ç–∞—Ç—É—Å</div>
                                <span class="badge badge-success">–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ</span>
                            </div>
                        </div>
                    </div>

                    <!-- –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å -->
                    <div class="card" style="margin-top: 1.5rem;">
                        <div class="card-header">
                            <h2 class="card-title">üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div>
                                <div class="text-sm text-muted-foreground">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                                <div style="font-weight: 600;">{{ user.username }}</div>
                            </div>
                            <div>
                                <div class="text-sm text-muted-foreground">Email</div>
                                <div style="font-weight: 600;">{{ user.email }}</div>
                            </div>
                            <div>
                                <div class="text-sm text-muted-foreground">–†–æ–ª—å</div>
                                <span class="badge badge-success">{{ user.role }}</span>
                            </div>
                            <div>
                                <button class="btn btn-outline" style="width: 100%;" onclick="location.href='/api/user'">
                                    üìã –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–æ—Ñ–∏–ª–µ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        function showReports() {
            alert('–†–∞–∑–¥–µ–ª –æ—Ç—á–µ—Ç–æ–≤ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏');
        }

        function showSettings() {
            alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        async function loadDashboardData() {
            try {
                const response = await fetch('/api/admin/stats');
                const stats = await response.json();
                
                document.getElementById('total-users').textContent = stats.total_users;
                document.getElementById('completed-orders').textContent = stats.total_orders - stats.pending_orders;
                document.getElementById('total-revenue').textContent = stats.revenue + '‚ÇΩ';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            console.log('üìä –î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω!');
        });
    </script>
</body>
</html>